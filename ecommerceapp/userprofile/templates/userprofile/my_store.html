{% extends "core/base.html" %}

{% block title %}My Store{% endblock %}

{% block content %}
 <h1 class="mt-6 text-2xl font-bold">My Store</h1>
 <a href="{% url 'add_product' %}" class="mt-6 inline-block bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-2 px-4 rounded">Add Product</a>
 <h2 class="mt-6 text-xl font-bold">My Products</h2>
   {% if request.user.products %}
   <div class="flex flex-wrap">
  
    {% for product in request.user.products.all %}
     <div class="product w-1/3 p-2">
         <div class="p-4 bg-gray-100"> 
             <a href="{% url 'product_detail' product.category.slug product.slug %}">
               {% if product.image %}
                 <div class="image mb-2">
                    <img src="{{ product.image.url }}" alt="{{ product.title }}" class="w-48">
                 </div>
               {% endif %}
              </a>
             
             <h2 class="text-lg text-gray-700 ">{{ product.title }}</h2>
             <p class="text-gray-600 text-end">${{ product.price }}</p>
             
             <a href="{% url 'edit_product' product.id %}">
             <button class="mt-2 inline-block bg-green-400 hover:bg-green-500 text-white font-bold py-2 px-4 rounded">Edit</button>
             <form action="{% url 'delete_product' product.id %}" method="POST">
                  {% csrf_token %}
                  <button type="submit" class="mt-2 inline-block bg-red-400 hover:bg-red-500 text-white font-bold py-2 px-4 rounded">Delete</button>
            </form>
            </a> 
         </div>
     </div> 
    
    {% endfor %}
 </div>
    
    {% else %}
  <p class="mt-6 bg-sky-100">You have no products in your store</p>
    {% endif %}
 {% endblock %}